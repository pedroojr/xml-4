<!DOCTYPE html>
<html>
<head>
    <title>Test React Data Processing</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Test React Data Processing</h1>
    <div id="results"></div>
    
    <script>
        async function testReactDataProcessing() {
            try {
                console.log('üîç Testando processamento de dados como no React...');
                
                // Simula exatamente o que o componente NFEView faz
                const response = await axios.get('http://localhost:3011/api/nfes/23250101933349000572550040003073661354363657');
                const nfeDetail = response.data;
                
                console.log('üìä nfeDetail recebido:', nfeDetail);
                console.log('üìä nfeDetail.produtos:', nfeDetail.produtos);
                
                // Simula a l√≥gica do componente: const nfe = nfeDetail || ...
                const nfe = nfeDetail;
                console.log('üìä nfe ap√≥s processamento:', nfe);
                
                // Simula: const produtos = Array.isArray(nfe.produtos) ? nfe.produtos : [];
                const produtos = Array.isArray(nfe.produtos) ? nfe.produtos : [];
                console.log('üìä produtos ap√≥s Array.isArray:', produtos);
                console.log('üìä produtos.length:', produtos.length);
                
                // Testa a renderiza√ß√£o de cada produto
                let html = '<h2>Produtos encontrados:</h2>';
                produtos.forEach((produto, index) => {
                    console.log(`üì¶ Produto ${index + 1}:`, {
                        descricao: produto.descricao,
                        codigo: produto.codigo,
                        unidade: produto.unidade,
                        discount: produto.discount
                    });
                    
                    html += `
                        <div style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                            <h3>${produto.descricao || 'Sem descri√ß√£o'}</h3>
                            <p>C√≥digo: ${produto.codigo || 'Sem c√≥digo'} ‚Ä¢ Unidade: ${produto.unidade || 'Sem unidade'} ‚Ä¢ NCM: ${produto.ncm || 'Sem NCM'}</p>
                            ${produto.discount && produto.discount > 0 ? `<p style="color: green;">Desconto: ${produto.discount.toFixed(2)}</p>` : ''}
                        </div>
                    `;
                });
                
                document.getElementById('results').innerHTML = html;
                
            } catch (error) {
                console.error('‚ùå Erro:', error);
                document.getElementById('results').innerHTML = `<p style="color: red;">Erro: ${error.message}</p>`;
            }
        }
        
        // Executa o teste quando a p√°gina carrega
        window.onload = testReactDataProcessing;
    </script>
</body>
</html>